/*! dxtpl by DXkite 2016-12-14 */
!function(a){function b(a,b){try{new Function(a)}catch(a){return"throw "+a.name+"("+e(a.message)+");{"}return b}function c(a,b){var c="";return a.match(/(?!^)\n/)?r(a.split("\n"),function(a){a&&(b&&(a=a.replace(/\s+/g," ").replace(/<!--.*?-->/g,"")),a&&(c+=n[1]+e(a)+n[2],c+="\n"))}):a&&(c+=n[1]+e(a)+n[2]),c}function d(a){var c;if(!(c=a.match(new RegExp(m))))return(c=a.match(/^!.*$/))?n[1]+"$_unit._echo("+c[1]+")"+n[2]:n[1]+"$_unit._escape("+a+")"+n[2];var d=c[1],e=c[2];switch(d){case"include":return e=e.trim().split(" "),1===e.length&&e.push("$_unit.value"),e=e.join(","),n[1]+"$_unit._include("+e+")"+n[2];case"if":return b("if("+e+"){}","if ("+e+") {");case"else":return(c=e.match(/^\s*if\s+(.*)/))?"} else if ("+c[1]+"){":"}else{";case"/if":case"/while":case"/for":return"}";case"while":return b("while("+e+"){}","while ("+e+") {");case"for":return b("for("+e+"){}","for ("+e+") {");case"each":var c=e.match(/(\w+)\s+(?:(?:as(?:\s+(\w+)))?(?:(?:\s+=>)?\s+(\w+))?)?/);if(c){var f,g=c[1];return f=c[2]?c[3]?c[3]+","+c[2]:c[2]:"value,index","$_unit._each("+g+",function("+f+"){"}return'throw SyntaxError("Null Each Value");$_unit._each(null,function(){';case"/each":return"});"}}function e(a){return"'"+a.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function f(a){return"[object Array]"===Object.prototype.toString.call(a)}function g(a,b,c,d){var a=a||"anonymous",e="DxTPL Error:";if(console.group(e),b){var f=b.replace(/^\n/,"").split("\n"),g=c-5>0?c-5:1,h=c+5>f.length?f.length:c+5;console.error(d);for(var i=g;i<h;i++)i==c?console.log(i+"|%c"+f[c-1]+"\t\t%c->\t\t%c"+d.name+":"+d.message,"color:red;","color:green;","color:red;"):console.log(i+"|"+f[i-1])}else console.log(b),console.log("%c"+e+d.message+"\t\t@"+a+":"+c,"color:red;");console.groupEnd(e)}function h(a,b){var e="";return a=a.replace(/^\n/,""),r(a.split(b.tagstart),function(a){var f=a.split(b.tagend);1===f.length?e+=c(f[0],b.compress):(e+=d(f[0]),e+=c(f[1]))}),e}function i(a,b,c){var d=c||!0,e=[];e.push("var $_unit=this,"+n[0]);for(var f in b)e.push(f+"=this.value."+f);var g="";return d&&(g='"use strict";'),g+=e.join(","),g+=";",g+=a+"return new String("+n[3]+");"}function j(a,b,c,d){var e,f=i(c,d),h={_each:r,_echo:p,_escape:q,_include:u,value:d};try{var j=new Function(f);e=j.call(h)}catch(c){var k=new String(c.stack).match(/<anonymous>:(\d+):\d+/);if(k){var l=k[1]-1;g(a,b,l,c)}else{var a=a||"anonymous",k=new String(c.stack).match(/Function code:(\d+):\d+/);k?console.error("DxTPL:Compile Error@"+a+" Line "+k[1]):console.error("DxTPL:Compile Error@"+a)}}return e}var k={cache:!0,tags:["{","}"],compress:!0,use_strict:!0},l="if,else,each,include,while,for",m="^\\s*((?:/)?(?:"+l.split(",").join("|")+"))(.*)",n="".trim?["$_tpl_=''","$_tpl_+=",";","$_tpl_"]:["$_tpl_=[]","$_tpl_.push(",");","$_tpl_.join('')"],o={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},p=function(a){return new String(a)},q=function(a){return p(a).replace(/&(?![\w#]+;)|[<>"']/g,function(a){return o[a]})},r=function(a,b){if(f(a))s(a,b);else for(var c in a)b.call(a[c],a[c],c)},s=function(a,b){for(var c=0;c<a.length;++c)b.call(a[c],a[c],c)},t=function(a){for(var b={},c=0;c<arguments.length;c++)for(var d in arguments[c])b[d]=arguments[c][d];return b},u=function(a,b){if(!document.getElementById(a))throw Error("No Template "+a);try{var c=new template(a,b);return c instanceof String?c:"[Error Template "+a+"]"}catch(a){throw a}},v=function(a){var b=t(k,a);this.config(b),this.template={}};v.prototype.config=function(a){this.cache=void 0!==typeof a.cache?a.cache:defaults.cache,this.compress=void 0!==typeof a.compress?a.compress:defaults.compress,a.tags&&2===a.tags.length&&(this.tagstart=a.tags[0],this.tagend=a.tags[1]),this.use_strict=a.use_strict||!0,this.id=a.id,this.value=a.value},v.prototype.assign=function(a,b){this.value[a]=t(this.value[a],b)},v.prototype.value=function(a){this.value=t(this.value,a)},v.prototype.render=function(a,b){var c=document.querySelectorAll(a),d=this;s(c,function(c,e){var f,i=c.innerHTML;if(c.dataset.tplInit)try{var k=new Function("return "+c.dataset.tplInit+";");f=k()}catch(b){g(a+"["+e+"]",null,0,new Error("Unsupport json"))}f=t(f,b);var l;d.template[a]?l=d.template[a]:(l=h(i,d),d.template[a]=l),console.log(l),c.innerHTML=j(a,i,l,f)})},a.dxtpl=new v}(window);